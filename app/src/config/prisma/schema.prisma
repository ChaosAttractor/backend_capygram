generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("CAPYGRAM_DB_URL")
}

model Messages {
  id     Int      @id @default(autoincrement())
  text   String
  viewed Boolean  @default(false)
  chatId Int
  date   DateTime @default(now())
  chat   Chat     @relation(fields: [chatId], references: [id])
}

model Chat {
  id       Int        @id @default(autoincrement())
  chatId   String     @default(uuid())
  userId   String
  user     Person     @relation(fields: [userId], references: [id])
  messages Messages[]
}

model Person {
  id       String @id @default(uuid())
  nickname String @db.VarChar(30)
  password String @db.VarChar(50)
  email    String @db.VarChar(50)
  role     Role   @default(USER)
  chats    Chat[]
}

enum Role {
  USER
  ADMIN
}
